[build]
  command = "npm run build"
  publish = "dist"

[build.environment]
  NODE_VERSION = "20"

# --- Always serve the primary canonical host (www) ---
# Root (no splat)
[[redirects]]
  from = "http://denverblackguide.com"
  to = "https://www.denverblackguide.com/"
  status = 301
  force = true

[[redirects]]
  from = "https://denverblackguide.com"
  to = "https://www.denverblackguide.com/"
  status = 301
  force = true

# All paths
[[redirects]]
  from = "http://denverblackguide.com/*"
  to = "https://www.denverblackguide.com/:splat/"
  status = 301
  force = true

[[redirects]]
  from = "https://denverblackguide.com/*"
  to = "https://www.denverblackguide.com/:splat/"
  status = 301
  force = true

# Optional: ensure http://www -> https://www
[[redirects]]
  from = "http://www.denverblackguide.com/*"
  to = "https://www.denverblackguide.com/:splat/"
  status = 301
  force = true

# --- Your sitemap redirect (keep) ---
[[redirects]]
  from = "/sitemap.xml"
  to = "/sitemap-index.xml"
  status = 301
  force = true
